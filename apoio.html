<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fam√≠lia Segolin | Formul√°rio de apoio</title>
  <link href="https://fonts.googleapis.com/css2?family=Albert+Sans:wght@400;500;600&display=swap" rel="stylesheet">
  <link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
/>
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="apoio.css">
<link rel="shortcut icon" type="imagex/png" href="./assets/japao.ico">
</head>
<body>

<!-- ======== MENU ======== -->
<div class="menu-toggle" onclick="toggleMenu()">
  <i class="fa-solid fa-bars"></i>
</div>

<nav class="menu">
  <button class="close-btn" onclick="toggleMenu()">
    <i class="fa-solid fa-xmark"></i>
  </button>
  <a href="index.html">In√≠cio</a>
  <a href="sobre.html">Quem somos</a>
  <a href="galeria.html">Galeria</a>
  <a href="apoio.html" class="active">Apoie-nos 2026</a>
  <a href="oferta.html">Como ofertar</a>
</nav>


  <div class="sun"></div>
  <div class="horizon"></div>

  <h1>Formul√°rio de apoio 2026</h1>
<p>
  Este formul√°rio √© um compromisso de apoio mensal que vale de janeiro de 2026 at√© dezembro de 2026.
  Caso, no decorrer do ano, precise encerrar esse compromisso, basta nos comunicar. N√£o se preocupe nem se envergonhe. Obrigada por nos ajudar nessa caminhada.<br><br>
  "Levai as cargas uns dos outros e assim cumprireis a lei de Cristo.‚Äù - G√°latas 6:2 ARC
</p>

<form id="contact-form" action="https://formspree.io/f/mzzjapbe" method="POST">
  
  <!-- ===== Passo 1 ===== -->
  <section id="step1">
    <label>Voc√™ vai apoiar como:*</label><br>
    <label><input type="radio" name="tipo" value="fisica" required> Pessoa f√≠sica</label><br>
    <label><input type="radio" name="tipo" value="juridica"> Pessoa jur√≠dica</label><br>
    <label><input type="radio" name="tipo" value="igreja"> Igreja</label><br>
    <label><input type="radio" name="tipo" value="grupo"> Grupo/Fam√≠lia</label><br>
    <button type="button" onclick="nextStep()">Pr√≥ximo</button>
  </section>

<section id="step1b" style="display:none;">
  <label>Quantas pessoas h√° no grupo/fam√≠lia?</label><br>
  <input type="number" id="qtdPessoas" min="1" max="20" required><br>
  <button type="button" onclick="previousStep()">Anterior</button>
  <button type="button" onclick="gerarCampos()">Pr√≥ximo</button>
</section>

<section id="step1c" style="display:none;">
  <div id="camposPessoas"></div>
  <button type="button" onclick="previousStep()">Anterior</button>
  <button type="button" onclick="nextStep()">Pr√≥ximo</button>
</section>


<!-- ===== Passo 2 ===== -->
<section id="step2" style="display:none;">
  <label id="labelNome">Nome e sobrenome:*<br>
    <input type="text" id="campoNome" name="nome" required>
  </label><br>

  <label id="labelAniversario">Anivers√°rio:<br>
    <input type="date" id="campoAniversario" name="aniversario">
  </label><br>

  <button type="button" onclick="previousStep()">Anterior</button>
  <button type="button" onclick="nextStep()">Pr√≥ximo</button>
</section>


  <!-- ===== Passo 3 ===== -->
  <section id="step3" style="display:none;">
    <label>Email:<br>
      <input type="email" name="email" required>
    </label><br><br>

    <button type="button" onclick="previousStep()">Anterior</button>
    <button type="button" onclick="nextStep()">Pr√≥ximo</button>
  </section>

  <!-- ===== Passo 4 ===== -->
  <section id="step4" style="display:none;">
    <label>Mensagem:<br>
      <textarea name="mensagem"></textarea>
    </label><br><br>

    <button type="button" onclick="previousStep()">Anterior</button>
    <button type="submit">Enviar</button>

    <p id="success-message" style="display:none; color:#b53039; margin-top:10px;">
      Mensagem enviada com sucesso! üéâ
    </p>
  </section>

</form>


 <div class="footer-space"></div>
<footer class="footer">
  <div class="social-icons">
    <a href="https://www.instagram.com/familiasegolin/" target="_blank" class="social-icon">
      <i class="fa-brands fa-instagram"></i>
    </a>
    <a href="https://www.youtube.com/@familiasegolin" target="_blank" class="social-icon">
      <i class="fa-brands fa-youtube"></i>
    </a>
        <a href="/whatsapp.html" class="social-icon">
      <i class="fa-brands fa-whatsapp"></i>
    </a>
  </div>

  <p class="credit">Site desenvolvido com ‚ù§Ô∏è por Rebecca Segolin</p>
</footer>

<script>
function toggleMenu() {
  const menu = document.querySelector('.menu');
  const toggle = document.querySelector('.menu-toggle');
  menu.classList.toggle('open');
  
  // Esconde o menu hamburguer quando o menu est√° aberto
  if (menu.classList.contains('open')) {
    toggle.style.display = 'none';
  } else {
    toggle.style.display = 'block';
  }
}

const form = document.getElementById("contact-form");
const successMessage = document.getElementById("success-message");

const SECTIONS = {
  step1: document.getElementById("step1"),
  step1b: document.getElementById("step1b"),
  step1c: document.getElementById("step1c"),
  step2: document.getElementById("step2"),
  step3: document.getElementById("step3"),
  step4: document.getElementById("step4"),
};

let current = "step1";
let cameFromGroup = false;

function showSection(name) {
  Object.values(SECTIONS).forEach(s => s && (s.style.display = "none"));
  SECTIONS[name] && (SECTIONS[name].style.display = "block");
  current = name;
}

function initSteps() {
  showSection("step1");
  cameFromGroup = false;
}
initSteps();

/* ======= Valida√ß√£o simples ======= */
function validateSection(sectionEl) {
  if (!sectionEl) return true;
  const required = Array.from(sectionEl.querySelectorAll("[required]"));
  for (const field of required) {
    if (field.type === "radio") {
      const group = sectionEl.querySelectorAll(`input[name='${field.name}']`);
      const checked = Array.from(group).some(r => r.checked);
      if (!checked) return { ok: false };
    } else if (!field.value) {
      return { ok: false };
    }
  }
  return { ok: true };
}

/* ======= Navega√ß√£o ======= */
function nextStep() {
  const currEl = SECTIONS[current];
  const valid = validateSection(currEl);
  if (!valid.ok) {
    alert("Preencha todos os campos obrigat√≥rios.");
    return;
  }

if (current === "step1") {
  const tipo = document.querySelector('input[name="tipo"]:checked')?.value;

  if (tipo === "grupo") {
    showSection("step1b");
    cameFromGroup = true;
    return;
  } else {
    atualizarCamposEtapa2(tipo); // üëà aqui a m√°gica acontece
    showSection("step2");
    return;
  }
}


  if (current === "step1b") {
    gerarCampos();
    showSection("step1c");
    return;
  }

  if (current === "step1c") {
    showSection("step2");
    return;
  }

  if (current === "step2") { showSection("step3"); return; }
  if (current === "step3") { showSection("step4"); return; }
}

function atualizarCamposEtapa2(tipo) {
  const labelNome = document.getElementById("labelNome");
  const campoNome = document.getElementById("campoNome");
  const labelAniversario = document.getElementById("labelAniversario");
  const campoAniversario = document.getElementById("campoAniversario");

  if (tipo === "igreja") {
    labelNome.childNodes[0].textContent = "Nome da igreja:*";
    campoNome.name = "nome_igreja";
    labelAniversario.childNodes[0].textContent = "Anivers√°rio da igreja:";
    campoAniversario.name = "aniversario_igreja";
  } else {
    labelNome.childNodes[0].textContent = "Nome e sobrenome:*";
    campoNome.name = "nome";
    labelAniversario.childNodes[0].textContent = "Anivers√°rio:";
    campoAniversario.name = "aniversario";
  }
}


function previousStep() {
  if (current === "step1b") { showSection("step1"); cameFromGroup = false; return; }
  if (current === "step1c") { showSection("step1b"); return; }
  if (current === "step2" && cameFromGroup) { showSection("step1c"); return; }
  if (current === "step2") { showSection("step1"); return; }
  if (current === "step3") { showSection("step2"); return; }
  if (current === "step4") { showSection("step3"); return; }
}

/* ======= Gera√ß√£o de campos do grupo ======= */
function gerarCampos() {
  const qtd = parseInt(document.getElementById("qtdPessoas").value);
  if (!qtd || qtd < 1) {
    alert("Por favor, informe uma quantidade v√°lida de pessoas.");
    return;
  }

  const campos = document.getElementById("camposPessoas");
  campos.innerHTML = "";
  const limit = Math.min(qtd, 20);

  for (let i = 1; i <= limit; i++) {
    const div = document.createElement("div");
    div.innerHTML = `
      <label>Nome ${i}:<br>
        <input type="text" name="nome_pessoa_${i}" required>
      </label><br>
      <label>Anivers√°rio ${i}:<br>
        <input type="date" name="aniversario_pessoa_${i}">
      </label><br>
    `;
    campos.appendChild(div);
  }

  // üëâ Ap√≥s gerar os campos, avan√ßa para a pr√≥xima etapa
  showSection("step1c");
}


/* ======= Expor fun√ß√µes para bot√µes ======= */
window.nextStep = nextStep;
window.previousStep = previousStep;
window.gerarCampos = gerarCampos;
</script>
</body>
</html>
